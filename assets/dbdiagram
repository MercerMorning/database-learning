 // Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs
Table products {
    id integer [primary key]
    producer integer [not null]
    title string [not null]
}

Table counterparty_products {
  id integer [primary key]
  counterparty integer [not null]
  product integer [not null]
  price float [not null]
  amount integer [not null]
}

Table categories {
    id integer [primary key]
    title string [not null]
}

Table product_categories {
    id integer [primary key]
    product integer [not null]
    category integer [not null]
}

Table counterparties {
  id integer [primary key]
  title string [not null]
  inn string [not null, unique]
}

Table producers {
  id integer [primary key]
  title string [not null]
  inn string [not null, unique]
}

Table customers {
  id integer [primary key]
  first_name string [not null]
  second_name string [not null]
  phone string [not null]
}

Table purchases {
  id integer [primary key]
  customer integer [not null]
  created_at datetime [not null]
  total float [not null]
}

Table purchase_products {
  id integer [primary key]
  amount integer [not null]
  total float [not null]
  purchase integer [not null]
  counterparty_product integer [not null]
}

Ref: counterparty_products.counterparty > counterparties.id
Ref: counterparty_products.product > products.id
Ref: purchases.customer > customers.id
Ref: purchase_products.purchase > purchases.id
Ref: purchase_products.counterparty_product > counterparty_products.id
Ref: product_categories.product > products.id
Ref: product_categories.category > categories.id
Ref: products.producer > producers.id